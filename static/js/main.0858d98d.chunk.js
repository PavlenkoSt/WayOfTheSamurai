(this["webpackJsonpway-of-the-samurai"]=this["webpackJsonpway-of-the-samurai"]||[]).push([[1],{138:function(e,t,n){},139:function(e,t,n){},228:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=n(40),u=n.n(a),c=(n(138),function(e){e&&e instanceof Function&&n.e(12).then(n.bind(null,320)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,u=t.getTTFB;n(e),r(e),i(e),a(e),u(e)}))}),s=(n(139),n(16)),o=n(63),l=n(58),d={links:[{id:1,url:"/profile",text:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"},{id:2,url:"/dialogs",text:"\u0414\u0438\u0430\u043b\u043e\u0433\u0438"},{id:3,url:"/users",text:"\u041b\u044e\u0434\u0438"},{id:4,url:"/news",text:"\u041d\u043e\u0432\u043e\u0441\u0442\u0438"},{id:5,url:"/musics",text:"\u041c\u0443\u0437\u044b\u043a\u0430"},{id:6,url:"/settings",text:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"}],friends:[{id:1,name:"\u0414\u043c\u0438\u0442\u0440\u0438\u0439"},{id:2,name:"\u041c\u0430\u0448\u0430"},{id:3,name:"\u0414\u0435\u0434 \u041c\u043e\u0440\u043e\u0437"},{id:4,name:"\u0412\u0430\u043b\u044e\u0445\u0430"}]},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;return e},b=n(78),j=n(24),h=n(80),O=n(3),g="SET_INITIALIZE",p={initialized:!1},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(O.a)(Object(O.a)({},e),{},{initialized:!0});default:return e}},x=n(77),_=Object(s.c)({dialogsPage:o.a,profilePage:l.b,usersPage:b.a,sidebar:f,auth:j.b,form:x.a,app:m}),v=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d,y=Object(s.e)(_,v(Object(s.a)(h.a))),w=n(6),E=n(15),P=n(17),S=n(39),N=n(2),T=function(e){return function(t){return Object(N.jsx)(i.a.Suspense,{fallback:Object(N.jsx)(S.a,{}),children:Object(N.jsx)(e,Object(O.a)({},t))})}},F=n(32),C=n.n(F),L=function(e){return Object(N.jsx)("div",{className:"container",children:Object(N.jsxs)("header",{className:C.a.header,children:[Object(N.jsx)(E.b,{className:C.a.logo,to:"/",children:Object(N.jsx)("img",{src:"./img/logo.svg",alt:"logo"})}),Object(N.jsx)("div",{className:C.a.login,children:e.isAuth?Object(N.jsxs)("div",{children:[Object(N.jsx)(E.b,{to:"/profile/".concat(e.id),children:e.login})," \xa0",Object(N.jsx)("button",{className:C.a.btn,onClick:e.logout,children:"\u0412\u044b\u0439\u0442\u0438"})]}):Object(N.jsx)(E.b,{to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})})]})})},z={logout:j.d},A=Object(P.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login,id:e.auth.id}}),z)((function(e){return Object(N.jsx)(L,Object(O.a)({},e))})),R=n(41),k=n.n(R),I=function(e){return Object(N.jsx)("li",{className:k.a.li,children:Object(N.jsx)(E.b,{className:k.a.a,to:e.to,activeClassName:k.a.active,children:e.text})},e.id)},U=n(42),D=n.n(U),G=function(e){return Object(N.jsxs)("a",{href:"#",className:D.a.item,children:[Object(N.jsx)("div",{className:D.a.img,children:Object(N.jsx)("img",{src:"https://placehold.it/200x200/333",alt:"friend"})}),Object(N.jsx)("div",{className:D.a.name,children:e.name})]})},H=n(54),M=n.n(H),B=function(e){var t=e.friends.map((function(e){return Object(N.jsx)(G,{name:e.name},e.id)}));return Object(N.jsxs)("div",{children:[Object(N.jsx)("h3",{className:M.a.header,children:"\u0414\u0440\u0443\u0437\u044c\u044f"}),Object(N.jsx)("div",{className:M.a.friends,children:t})]})},V=n(85),J=n.n(V),W=function(e){return Object(N.jsxs)("nav",{className:J.a.navbar,children:[Object(N.jsx)("ul",{children:e.sidebarLinks}),Object(N.jsx)(B,{friends:e.friends})]})},K=Object(P.b)((function(e){return{sidebarLinks:e.sidebar.links.map((function(e){return Object(N.jsx)(I,{to:e.url,text:e.text},e.id)})),friends:e.sidebar.friends}}),(function(e){return{}}))(W),X=i.a.lazy((function(){return n.e(11).then(n.bind(null,321))})),Y=i.a.lazy((function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,325))})),Z=i.a.lazy((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,326))})),q=i.a.lazy((function(){return n.e(6).then(n.bind(null,327))})),Q=i.a.lazy((function(){return n.e(9).then(n.bind(null,322))})),$=i.a.lazy((function(){return n.e(8).then(n.bind(null,323))})),ee=i.a.lazy((function(){return n.e(10).then(n.bind(null,324))})),te=i.a.lazy((function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,328))})),ne=Object(s.d)(w.f,Object(P.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){e(Object(j.a)()).then((function(){e({type:g})}))}}}))((function(e){return Object(r.useEffect)((function(){e.initializeApp()}),[e.initialized]),e.initialized?Object(N.jsxs)("div",{className:"app-wrapper",children:[Object(N.jsx)(A,{}),Object(N.jsx)("div",{className:"container",children:Object(N.jsxs)("div",{className:"main",children:[Object(N.jsx)(K,{}),Object(N.jsx)(w.b,{path:"/",exact:!0,render:T(X)}),Object(N.jsx)(w.b,{path:"/profile/:userId?",render:T(Y)}),Object(N.jsx)(w.b,{path:"/dialogs",render:T(Z)}),Object(N.jsx)(w.b,{path:"/users",render:T(q)}),Object(N.jsx)(w.b,{path:"/news",render:T(Q)}),Object(N.jsx)(w.b,{path:"/musics",render:T($)}),Object(N.jsx)(w.b,{path:"/settings",render:T(ee)}),Object(N.jsx)(w.b,{path:"/login",render:T(te)})]})})]}):Object(N.jsx)(S.a,{})})),re=function(){return Object(N.jsx)(E.a,{children:Object(N.jsx)(P.a,{store:y,children:Object(N.jsx)(ne,{})})})};u.a.render(Object(N.jsx)(i.a.StrictMode,{children:Object(N.jsx)(re,{})}),document.getElementById("root")),c()},24:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return d}));var r=n(3),i=n(43),a=n(8),u="SET_USER_DATA",c="REMOVE_USER_DATA",s={id:"",email:null,login:null,isAuth:!1},o=function(){return function(e){return a.a.auth.authMy().then((function(t){if(0===t.resultCode){var n=t.data,r=n.id,i=n.email,a=n.login;return e(function(e,t,n){return{type:u,data:{id:e,email:t,login:n}}}(r,i,a)),1}}))}},l=function(e,t,n){return function(r){return a.a.auth.login(e,t,n).then((function(e){0===e.resultCode?r(o()):r(Object(i.a)("login",{_error:e.messages[0]}))}))}},d=function(){return function(e){return a.a.auth.logout().then((function(t){0===t.resultCode&&e({type:c})}))}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return Object(r.a)(Object(r.a)(Object(r.a)({},e),t.data),{},{isAuth:!0});case c:return Object(r.a)(Object(r.a)({},e),{},{id:"",email:null,login:null,isAuth:!1});default:return e}}},32:function(e,t,n){e.exports={header:"Header_header__2dZzh",logo:"Header_logo__hp-JB",login:"Header_login__C3ERR",btn:"Header_btn__28450"}},39:function(e,t,n){"use strict";var r=n(84),i=n.n(r),a=n(2);t.a=function(){return Object(a.jsx)("div",{className:i.a.ldsHourglass})}},41:function(e,t,n){e.exports={li:"Link_li__3uHua",a:"Link_a__3wz63",active:"Link_active__ffLFY"}},42:function(e,t,n){e.exports={item:"Friend_item__BpvNz",name:"Friend_name__aFyoF",img:"Friend_img__2RUKh"}},54:function(e,t,n){e.exports={header:"Friends_header__3DV7y",friends:"Friends_friends__3Um4s"}},58:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return p})),n.d(t,"e",(function(){return m}));var r=n(20),i=n.n(r),a=n(31),u=n(25),c=n(3),s=n(8),o="ADD-POST",l="REMOVE_POST",d="GET_USER_PROFILE",f="SET_STATUS",b=function(e){return{type:o,text:e}},j=function(e){return{type:d,userProfile:e}},h=function(e){return{type:f,status:e}},O={posts:[{id:1,message:"\u041f\u0440\u0438\u0432\u0435\u0442, \u044d\u0442\u043e \u043d\u043e\u0432\u0430\u044f \u0441\u043e\u0446\u0438\u0430\u043b\u044c\u043d\u0430\u044f \u0441\u0435\u0442\u044c! \u0423\u0440\u0430!"},{id:2,message:"\u041f\u043e\u0447\u0435\u043c\u0443 \u043c\u0435\u043d\u044f \u043d\u0438\u043a\u0442\u043e \u043d\u0435 \u043b\u044e\u0431\u0438\u0442?"}],userProfile:null,status:""},g=function(e,t){return function(n){e?s.a.profile.getProfile(e).then((function(e){return n(j(e))})):s.a.profile.getProfile(t).then((function(e){return n(j(e))}))}},p=function(e,t){return function(n){e?s.a.profile.getStatus(e).then((function(e){return n(h(e))})):s.a.profile.getStatus(t).then((function(e){return n(h(e))}))}},m=function(e){return function(){var t=Object(a.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.profile.updateStatus(e);case 2:0===t.sent.data.resultCode&&n(h(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o:var n={id:3,message:t.text};return Object(c.a)(Object(c.a)({},e),{},{posts:[].concat(Object(u.a)(e.posts),[n])});case l:return Object(c.a)(Object(c.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!==t.id}))});case d:return Object(c.a)(Object(c.a)({},e),{},{userProfile:t.userProfile});case f:return Object(c.a)(Object(c.a)({},e),{},{status:t.status});default:return e}}},63:function(e,t,n){"use strict";n.d(t,"b",(function(){return u}));var r=n(25),i=n(3),a="SEND-MESSAGE",u=function(e){return{type:a,message:e}},c={users:[{name:"\u0412\u0438\u0442\u0430\u043b\u0438\u0439",id:1},{name:"\u041c\u0430\u0448\u0430",id:2},{name:"\u0414\u0435\u0434 \u041c\u043e\u0440\u043e\u0437",id:3}],messages:[{id:1,name:"\u042f",message:"\u041f\u0440\u0438\u0432\u0435\u0442, \u043a\u0430\u043a \u0434\u0435\u043b\u0430?"},{id:2,name:"\u042f",message:"\u041f\u0440\u0438\u0432\u0435\u0442, \u0445\u043e\u0440\u043e\u0448\u043e, \u0430 \u0443 \u0442\u0435\u0431\u044f?"},{id:3,name:"\u042f",message:"\u042d\u0445, \u0431\u0438\u043f\u043e\u043b\u044f\u0440\u043a\u0430 \u043c\u043e\u044f..."},{id:4,name:"\u042f",message:"\u041a\u0442\u043e-\u043d\u0438\u0431\u0443\u0434\u044c \u0437\u0434\u0435\u0441\u044c \u0435\u0441\u0442\u044c?"}]};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a:var n={id:5,name:"\u042f",message:t.message};return Object(i.a)(Object(i.a)({},e),{},{messages:[].concat(Object(r.a)(e.messages),[n])});default:return e}}},78:function(e,t,n){"use strict";n.d(t,"e",(function(){return m})),n.d(t,"d",(function(){return x})),n.d(t,"c",(function(){return w})),n.d(t,"f",(function(){return P})),n.d(t,"b",(function(){return S}));var r=n(20),i=n.n(r),a=n(31),u=n(25),c=n(3),s=n(8),o=function(e,t,n){return e.map((function(e){return e.id===t&&(e.followed=n),e}))},l="FOLLOW",d="UNFOLLOW",f="SET_USERS",b="SET_TOTAL_COUNT",j="SET_CURRENT_PAGE",h="FETCHING_LOADER_TOGGLE",O="FOLLOWING_PROGRESS",g=function(e){return{type:l,id:e}},p=function(e){return{type:d,id:e}},m=function(e){return{type:b,totalCount:e}},x=function(e){return{type:j,currentPage:e}},_=function(e){return{type:h,isFetching:e}},v=function(e,t){return{type:O,isFetching:e,userId:t}},y={users:[],usersCountOnPage:10,totalCount:0,currentPage:1,portionsSize:10,isFetching:!0,followingProgress:[]},w=function(e,t){return function(){var n=Object(a.a)(i.a.mark((function n(r){var a;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(_(!0)),n.next=3,s.a.users.getUsers(e,t);case 3:return a=n.sent,n.next=6,r((i=a.items,{type:f,users:i}));case 6:return r(_(!1)),n.abrupt("return",a);case 8:case"end":return n.stop()}var i}),n)})));return function(e){return n.apply(this,arguments)}}()},E=function(){var e=Object(a.a)(i.a.mark((function e(t,n,r,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(v(!0,a)),e.next=3,n(a);case 3:0===e.sent.resultCode&&t(r(a)),t(v(!1,a));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),P=function(e){return function(t){E(t,s.a.users.unfollow,p,e)}},S=function(e){return function(t){E(t,s.a.users.follow,g,e)}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(c.a)(Object(c.a)({},e),{},{users:o(e.users,t.id,!0)});case d:return Object(c.a)(Object(c.a)({},e),{},{users:o(e.users,t.id,!1)});case f:return Object(c.a)(Object(c.a)({},e),{},{users:t.users});case b:return Object(c.a)(Object(c.a)({},e),{},{totalCount:t.totalCount});case j:return Object(c.a)(Object(c.a)({},e),{},{currentPage:t.currentPage});case h:return Object(c.a)(Object(c.a)({},e),{},{isFetching:t.isFetching});case O:return t.isFetching?Object(c.a)(Object(c.a)({},e),{},{followingProgress:[].concat(Object(u.a)(e.followingProgress),[t.userId])}):Object(c.a)(Object(c.a)({},e),{},{followingProgress:[e.followingProgress.filter((function(e){return e!==t.userId}))]});default:return e}}},8:function(e,t,n){"use strict";var r=n(79),i=r.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"a149094e-a55f-407f-83ce-762f3cd3f906"}}),a={auth:{authMy:function(){return i.get("auth/me").then((function(e){return e.data}))},login:function(e,t,n){return i.post("auth/login",{email:e,password:t,isRemember:n}).then((function(e){return e.data}))},logout:function(){return i.delete("auth/login").then((function(e){return e.data}))}},users:{getUsers:function(e,t){return i.get("users?count=".concat(e,"&page=").concat(t)).then((function(e){return e.data}))},follow:function(e){return i.post("follow/".concat(e)).then((function(e){return e.data}))},unfollow:function(e){return i.delete("follow/".concat(e)).then((function(e){return e.data}))}},profile:{getProfile:function(e){return i.get("profile/".concat(e)).then((function(e){return e.data}))},getStatus:function(e){return i.get("profile/status/".concat(e)).then((function(e){return e.data}))},updateStatus:function(e){return i.put("profile/status",{status:e})}}};t.a=a},84:function(e,t,n){e.exports={ldsHourglass:"Preloader_ldsHourglass__1GrPD"}},85:function(e,t,n){e.exports={navbar:"Sidebar_navbar__3rmR8"}}},[[228,2,3]]]);
//# sourceMappingURL=main.0858d98d.chunk.js.map